#include "main.h"

char fonts[][16] = {
    {0x00,0x3C,0x7E,0x43,0xC3,0xC3,0xC1,0xC1,0xC1,0xC1,0xC3,0xC3,0x62,0x7E,0x18,0x00,},/*"0",0*/
    {0x00,0x20,0x30,0x38,0x3C,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x00,},/*"1",1*/
    {0x00,0x3C,0x7E,0xC3,0xC1,0xC0,0x60,0x60,0x30,0x18,0x08,0x0C,0x06,0xFF,0xFF,0x00,},/*"2",2*/
    {0x00,0x3C,0x66,0xC3,0xC1,0x40,0x60,0x38,0x60,0xC0,0xC0,0xC1,0x43,0x7E,0x1C,0x00,},/*"3",3*/
    {0x00,0x60,0x60,0x70,0x78,0x68,0x6C,0x66,0x63,0x61,0xFF,0xFF,0x60,0x60,0x60,0x00,},/*"4",4*/
    {0x00,0xFC,0xFC,0x04,0x04,0x06,0x7E,0xC6,0x80,0x80,0x80,0x83,0xC2,0xFE,0x38,0x00,},/*"5",5*/
    {0x00,0x30,0x10,0x18,0x0C,0x04,0x7E,0xE7,0xC3,0x83,0x81,0x83,0xC3,0x7E,0x3C,0x00,},/*"6",6*/
    {0x00,0xFF,0xFF,0xC0,0x40,0x60,0x20,0x30,0x10,0x18,0x08,0x08,0x0C,0x0C,0x04,0x00,},/*"7",7*/
    {0x00,0x3C,0x7E,0x43,0xC1,0x43,0x66,0x3E,0x67,0xC1,0xC1,0xC1,0xC3,0x7F,0x3C,0x00,},/*"8",8*/
    {0x00,0x78,0xFE,0x86,0x83,0x83,0x83,0xC6,0xFE,0x78,0x60,0x30,0x30,0x18,0x08,0x00,},/*"9",9*/
    {0x00,0x00,0x00,0x00,0x7E,0x66,0x40,0x78,0x5E,0x43,0x63,0x7F,0xCE,0x00,0x00,0x00,},/*"a",10*/
    {0x00,0x03,0x03,0x03,0x03,0x03,0x3F,0x67,0xC3,0xC3,0xC3,0xC3,0x43,0x7F,0x1B,0x00,},/*"b",11*/
    {0x00,0x00,0x00,0x00,0x7E,0x67,0xC3,0x01,0x01,0xC3,0xC3,0x7E,0x3C,0x00,0x00,0x00,},/*"c",12*/
    {0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xFE,0xE3,0xC3,0xC1,0xC1,0xC3,0xE3,0xFE,0xDC,0x00,},/*"d",13*/
    {0x00,0x00,0x00,0x00,0x7E,0x62,0xC3,0xFF,0x03,0x03,0xC3,0x7E,0x3C,0x00,0x00,0x00,},/*"e",14*/
    {0x00,0xF0,0xF8,0x08,0x08,0x08,0x7F,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,},/*"f",15*/
    {0x00,0x00,0x00,0xFE,0x22,0x63,0x62,0x3E,0x1F,0x03,0x7E,0xC3,0xC1,0x7F,0x00,0x00,},/*"g",16*/
    {0x00,0x03,0x03,0x03,0x03,0x03,0x7B,0xC7,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x00,},/*"h",17*/
    {0x00,0x18,0x18,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00,},/*"i",18*/
    {0x40,0x40,0x00,0x00,0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x60,0x7C,},/*"j",19*/
    {0x00,0x03,0x03,0x03,0x03,0x03,0x63,0x33,0x1B,0x1F,0x37,0x23,0x63,0x43,0xC3,0x00,},/*"k",20*/
    {0x00,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00,},/*"l",21*/
    {0x00,0x00,0x00,0x00,0xEF,0x9B,0x99,0x99,0x99,0x99,0x99,0x99,0x99,0x00,0x00,0x00,},/*"m",22*/
    {0x00,0x00,0x00,0x00,0x7B,0xC7,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x00,0x00,0x00,},/*"n",23*/
    {0x00,0x00,0x00,0x00,0x3E,0x67,0xC3,0xC1,0xC1,0xC3,0xC3,0x7E,0x1C,0x00,0x00,0x00,},/*"o",24*/
    {0x00,0x00,0x3F,0x67,0xC3,0xC3,0xC3,0xC3,0x43,0x7F,0x3B,0x03,0x03,0x03,0x00,0x00,},/*"p",25*/
    {0x00,0x00,0xFE,0xE3,0xC3,0xC1,0xC1,0xC3,0xE3,0xFE,0xDC,0xC0,0xC0,0xC0,0x00,0x00,},/*"q",26*/
    {0x00,0x00,0x00,0x00,0x76,0x1E,0x0E,0x06,0x06,0x06,0x06,0x06,0x06,0x00,0x00,0x00,},/*"r",27*/
    {0x00,0x00,0x00,0x00,0x7E,0x42,0x02,0x0E,0x7C,0xC0,0xC3,0x7E,0x3C,0x00,0x00,0x00,},/*"s",28*/
    {0x00,0x00,0x0C,0x0C,0x0C,0x7F,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0xF8,0x70,0x00,0x00,},/*"t",29*/
    {0x00,0x00,0x00,0x00,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xE3,0xF7,0xCC,0x00,0x00,0x00,},/*"u",30*/
    {0x00,0x00,0x00,0x00,0xC3,0x43,0x62,0x66,0x26,0x34,0x3C,0x18,0x18,0x00,0x00,0x00,},/*"v",31*/
    {0x00,0x00,0x00,0x00,0x33,0x33,0x3A,0xAA,0xEE,0xCE,0xCC,0xCC,0xCC,0x00,0x00,0x00,},/*"w",32*/
    {0x00,0x00,0x00,0x00,0x63,0x66,0x34,0x1C,0x18,0x3C,0x26,0x62,0xC3,0x00,0x00,0x00,},/*"x",33*/
    {0x00,0x00,0x00,0xC3,0x43,0x62,0x66,0x26,0x34,0x3C,0x18,0x18,0x08,0x0E,0x00,0x00,},/*"y",34*/
    {0x00,0x00,0x00,0x00,0x7F,0x60,0x30,0x18,0x08,0x0C,0x06,0xFF,0xFF,0x00,0x00,0x00,},/*"z",35*/
    {0x00,0x18,0x18,0x1C,0x3C,0x3C,0x24,0x66,0x66,0x7E,0x43,0xC3,0xC3,0xC1,0x81,0x00,},/*"A",36*/
    {0x00,0x3F,0x7F,0xC3,0xC3,0xC3,0x63,0x3F,0x63,0xC3,0xC3,0xC3,0xC3,0x7F,0x1F,0x00,},/*"B",37*/
    {0x00,0x38,0x7E,0xC6,0xC3,0xC3,0x03,0x03,0x03,0xC3,0xC3,0xC3,0xC6,0x7E,0x38,0x00,},/*"C",38*/
    {0x00,0x1F,0x3F,0x63,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x63,0x3F,0x0F,0x00,},/*"D",39*/
    {0x00,0xFF,0xFF,0x03,0x03,0x03,0x03,0x7F,0x03,0x03,0x03,0x03,0x03,0xFF,0xFF,0x00,},/*"E",40*/
    {0x00,0xFF,0xFF,0x03,0x03,0x03,0x03,0x7F,0x7F,0x03,0x03,0x03,0x03,0x03,0x03,0x00,},/*"F",41*/
    {0x00,0x3C,0x7E,0x42,0xC3,0xC3,0x03,0x03,0xF3,0xC3,0xC3,0xC3,0xC6,0xFE,0x98,0x00,},/*"G",42*/
    {0x00,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xFF,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x00,},/*"H",43*/
    {0x00,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00,},/*"I",44*/
    {0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC3,0xC3,0xC3,0x63,0x7E,0x1C,0x00,},/*"J",45*/
    {0x00,0xC3,0x63,0x33,0x33,0x1B,0x0F,0x1F,0x1F,0x33,0x33,0x63,0x63,0xC3,0xC3,0x00,},/*"K",46*/
    {0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0xFF,0xFF,0x00,},/*"L",47*/
    {0x00,0xC3,0xE3,0xE7,0xE7,0xA5,0xA5,0xA5,0xBD,0xBD,0x9D,0x99,0x99,0x99,0x99,0x00,},/*"M",48*/
    {0x00,0xC3,0xC3,0xC7,0xC7,0xCF,0xCF,0xDB,0xDB,0xD3,0xF3,0xE3,0xE3,0xE3,0xC3,0x00,},/*"N",49*/
    {0x00,0x3C,0x7E,0xC3,0xC3,0xC3,0xC1,0xC1,0xC1,0xC1,0xC3,0xC3,0x63,0x7E,0x1C,0x00,},/*"O",50*/
    {0x00,0x3F,0x7F,0xC3,0xC3,0xC3,0xC3,0xE3,0x7F,0x03,0x03,0x03,0x03,0x03,0x03,0x00,},/*"P",51*/
    {0x00,0x3C,0x7E,0xC3,0xC3,0xC3,0xC1,0xC1,0xC1,0xC1,0xF3,0xF3,0x63,0x7E,0x5C,0x40,},/*"Q",52*/
    {0x00,0x3F,0x7F,0xC3,0xC3,0xC3,0xC3,0x7F,0x3F,0x33,0x23,0x63,0x63,0xC3,0xC3,0x00,},/*"R",53*/
    {0x00,0x3C,0x7E,0x43,0xC3,0x03,0x06,0x3C,0x70,0xE0,0xC3,0xC3,0xC3,0x7E,0x3C,0x00,},/*"S",54*/
    {0x00,0xFF,0xFF,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00,},/*"T",55*/
    {0x00,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0xC3,0x7E,0x3C,0x00,},/*"U",56*/
    {0x00,0x03,0x82,0x86,0x86,0x86,0xC4,0xCC,0x4C,0x68,0x78,0x78,0x38,0x30,0x30,0x00,},/*"V",57*/
    {0x00,0x99,0x99,0x99,0x99,0xDD,0xDD,0xF5,0xF7,0xE7,0x67,0x67,0x66,0x66,0x62,0x00,},/*"W",58*/
    {0x00,0x86,0x86,0xCC,0x4C,0x78,0x38,0x30,0x30,0x78,0x4C,0xCC,0xC6,0x86,0x83,0x00,},/*"X",59*/
    {0x00,0x03,0x86,0x86,0xCC,0x4C,0x78,0x38,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x00,},/*"Y",60*/
    {0x00,0xFF,0xFF,0x40,0x60,0x30,0x30,0x18,0x08,0x0C,0x06,0x02,0x03,0xFF,0xFF,0x00,},/*"Z",61*/
};

static void makeFont(CharFont * font, int n){
    int x, y;
    for(y=0; y<font->height; y++){
        for(x=0; x<font->width; x++){
            *(font->p + y*font->width + x) = ((0x01 << x) & fonts[n][y]) ? 1 : 0;
        }
    }
}

CharFont getCharFont(char c){
    CharFont font_c;
    font_c.width = 8;
    font_c.height = 16;
    font_c.p = malloc(font_c.height * font_c.width);

    if(c >= '0' && c <= '9'){
        makeFont(&font_c, c - '0');
    }
    else if(c >= 'a' && c <= 'z'){
        makeFont(&font_c, c - 'a' + 10);
    }
    else if(c >= 'A' && c <= 'Z'){
        makeFont(&font_c, c - 'A' + 36);
    }
    return font_c;
}